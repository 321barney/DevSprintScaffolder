# SoukMatch Environment Configuration
# Copy this file to .env and fill in your values

# ========================================
# DATABASE
# ========================================
DATABASE_URL=postgresql://user:password@localhost:5432/soukmatch

# ========================================
# APPLICATION
# ========================================
NODE_ENV=development
PORT=5000

# ========================================
# SECURITY & AUTHENTICATION
# ========================================
# Session secret - change in production to a random 32+ character string
SESSION_SECRET=change-me-to-random-string-in-production

# Password hashing rounds (10 is recommended for bcrypt)
BCRYPT_ROUNDS=10

# ========================================
# PHASE 1: AI SERVICES (Dynamic Pricing & Scoring)
# ========================================
# Get your API key from: https://console.anthropic.com/
ANTHROPIC_API_KEY=

# AI Features toggle (set to 'false' to use static fallback pricing)
ENABLE_AI_PRICING=true
ENABLE_AI_SCORING=true

# ========================================
# PHASE 1: PAYMENT SERVICE PROVIDER (PSP)
# ========================================
# Options: 'CMI', 'PayZone', 'MTC', 'test'
PSP_PROVIDER=test

# PSP Credentials (get from your Moroccan bank/PSP)
# For CMI (Centre Mon√©tique Interbancaire):
PSP_MERCHANT_ID=
PSP_TERMINAL_ID=
PSP_SECRET_KEY=

# PSP API Endpoints
# CMI Production: https://payment.cmi.co.ma/gateway
# CMI Sandbox: https://testpayment.cmi.co.ma/gateway
PSP_API_URL=https://testpayment.cmi.co.ma/gateway

# Callback URL (PSP will POST here after payment)
PSP_CALLBACK_URL=http://localhost:5000/api/payment/callback

# ========================================
# PHASE 1: COMMISSION CONFIGURATION
# ========================================
# Platform commission rates by category (decimal format: 0.15 = 15%)
COMMISSION_RATE_TRANSPORT=0.12
COMMISSION_RATE_TOUR=0.18
COMMISSION_RATE_SERVICE=0.15
COMMISSION_RATE_FINANCING=0.20
DEFAULT_COMMISSION_RATE=0.15

# Free tier settings
FREE_OFFERS_PER_PROVIDER=4

# Subscription pricing (in MAD - Moroccan Dirham)
SUBSCRIPTION_BASIC_PRICE_MAD=299
SUBSCRIPTION_PRO_PRICE_MAD=799

# ========================================
# RATE LIMITING (Optional)
# ========================================
# General API rate limit
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=60

# Auth endpoints (stricter)
AUTH_RATE_LIMIT_WINDOW_MS=60000
AUTH_RATE_LIMIT_MAX_REQUESTS=10

# Offer submission (per provider)
OFFER_RATE_LIMIT_WINDOW_MS=60000
OFFER_RATE_LIMIT_MAX_REQUESTS=20

# ========================================
# FEATURES FLAGS (Optional)
# ========================================
# Enable/disable features during rollout
ENABLE_WEBSOCKET_OFFERS=false
ENABLE_KYC_FILE_UPLOAD=false
ENABLE_FINANCING_BROKER=false
ENABLE_ADMIN_PANEL=false

# ========================================
# DEVELOPMENT ONLY
# ========================================
# Seed database on startup (development only!)
AUTO_SEED_DB=false

# Enable detailed SQL logging
DEBUG_SQL=false
